<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Настройки</title>
    <link rel="stylesheet" type="text/css" href="css/options.css">
    <script type="module" src="js/options.js"></script>
    <script type="module" src="js/tinysort.min.js"></script>
</head>
<body>
<div class="fieldsetRow">
    <div class="leftColumn">
        <fieldset class="table">
            <legend>Портфель</legend>
            <div id="portfolio">
                <h2>Сессия истекла или нет доступа к сервису</h2>
            </div>
        </fieldset>
    </div>
    <div class="rightColumn">
        <fieldset class="table">
            <legend>Информация - <span id="error_message"></span><span id="message"></span></legend>
            Ваш риск профиль <a href="https://help.tinkoff.ru/invest-premium/invest-premium-profile/" target="_blank"><span id="riskProfile" style="font-weight: bold">~</span></a>, у Вас <span id="qualStatus" style="font-weight: bold">~</span> <a href="https://help.tinkoff.ru/invest-premium/invest-premium-qualification/" target="_blank">квалифицированный инвестор</a>.
            Форма <a href="https://help.tinkoff.ru/trading-account/intaxes/usa-dividends/" target="_blank">w8</a> <span id="approvedW8" style="font-weight: bold">~</span><br>
            <span id="employee" style="font-weight: bold"></span>
            <div class="header">
                <span>Стоимость <a href="https://www.tinkoff.ru/invest/broker_account/" target="_blank" title="Открыть страницу брокера">портфеля</a></span>
                <span id="sum" style="font-weight: bold" title="Включает в себя в том числе свободные денежные средства на инвест счете">~</span>
                <span>Доход всего</span>
                <span id="all" style="font-weight: bold"><span id="earnedAll">~</span><span class="percent" id="earnedAllPercent">~</span></span>
                <span>За сегодня</span>
                <span id="day" style="font-weight: bold" title="Доходность считается по последней цене"><span id="earnedToday">~</span><span class="percent" id="earnedTodayPercent">~</span></span>
                <div id="cash"></div>
            </div>

            <a id="toggle_info" class="toggle" style="float: right" href="#info">Версия приложения <span id="app_version">~</span></a>
            <div class="toggle-content" id="info">
                <p><strong>Данное приложение неофициальное.</strong> Написано для себя, в виду отсутствия
                    необходимого
                    функционала в TCS Broker.</p>
                <p>Алгоритм очень простой: Каждую минуту приложение обращается к сервису брокера и получает
                    актуальную
                    информацию о выбранных бумагах в списке для отслеживания.
                    И при достижении указанной цены, выдает оповещение на экран и опционально открывает страницу
                    покупки/продажи. В любом случае <strong>приложение ничего само не продает и не покупает</strong>,
                    более того такой возможности не предоставляет сам брокер, так как любые операции должны
                    подтверждаться
                    СМС.
                </p>
                <p>
                    Исходный код приложения доступен <a target="_blank"
                                                        href="https://github.com/almirus/broker_tcs">тут</a>.
                    <a href="mailto:al-open@yandex.ru?subject=TCS Broker">Вопросы, предложения</a>
                </p>
            </div>
        </fieldset>
        <fieldset class="table">

            <legend>Основные настройки</legend>
            <input type="checkbox" value="0" name="redirect" id="redirect">
            <label for="redirect">При истечении сессии редиректить на страницу логина, иначе показывать иконкой</label>
            <img class="help" src="icons/faq_help_question_icon_16.png" alt="помощь"
                 title="Если галочка установлена, то при любой проверке данных с сервера и невалидной сессии будет перенаправление на страницу брокера с предложением залогиниться">
            <br>
            <input type="checkbox" value="0" name="session" id="session">
            <label for="session">Сохранять сессию в личном кабинете (для получения данных в фоне)</label>
            <img class="help" src="icons/faq_help_question_icon_16.png" alt="помощь"
                 title="В фоне периодически будет пинговаться сервер и не давать завершить сессию в личном кабинете&#013;Если выключено, никаких уведомлений не будет&#013;Учтите, что это может быть небезопасно, если доступ к браузеру имеют 3е лица">
            <br>
            <input type="checkbox" value="0" name="cosmetic" id="cosmetic">

            <label for="cosmetic">Применить косметические фильтры на странице брокера</label>
            <img class="help" src="icons/faq_help_question_icon_16.png" alt="помощь"
                 title="Уменьшает размеры элементов чтобы на экране в личном кабинете поместилось больше информации">
            <br>
            <input type="checkbox" value="0" name="alert_redirect" id="alert_redirect">
            <label for="alert_redirect">При достижении цены открывать страницу покупки/продажи</label>
            <img class="help" src="icons/faq_help_question_icon_16.png" alt="помощь"
                 title="Если установлена галочка будет сразу открыто окно с покупкой/продажи акции, иначе будет показано стандартное уведомление&#013;Нужно по нему кликнуть чтобы открылась страница покупки\продажи">
            <br>
            <input type="checkbox" value="0" name="alert_today" id="alert_today">
            <label for="alert_today">Оповещать, если в течении дня <strong>стоимость портфеля</strong> поменялась на
                ±<input class="textInput" type="number"
                        title="Установить доходность, при достижении которой будет выведено уведомление"
                        name="alert_today_value"
                        id="alert_today_value"
                        maxlength="3"
                        min="0">%</label>
            <img class="help" src="icons/faq_help_question_icon_16.png" alt="помощь"
                 title="Выдает уведомление, если стоимость всего портфеля поменялась в течении дня на более чем на указанную величину&#013;Нажмите цифру чтобы изменить">
            <br>
            <input type="checkbox" value="0" name="alert_today_per_symbol" id="alert_today_per_symbol">
            <label for="alert_today_per_symbol">Оповещать, если в течении дня <strong>стоимость любой купленной
                позиции</strong> поменялась на
                ±<input class="textInput" type="number"
                        title="Установить доходность, при достижении которой будет выведено уведомление"
                        name="alert_today_value_per_symbol"
                        id="alert_today_value_per_symbol" maxlength="3"
                        min="0">%</label>
            <img class="help" src="icons/faq_help_question_icon_16.png" alt="помощь"
                 title="Выдает уведомление, если стоимость любой позиции в портфеле поменялась в течении дня на указанную величину. Нужно учитывать, что брокер считает доходность по цене последней сделки&#013;Нажмите цифру чтобы изменить">

            <br>
            <input type="checkbox" value="0" name="convert_to_rub" id="convert_to_rub">
            <label for="convert_to_rub">Показывать итоговые суммы в рублях</label>
            <img class="help" src="icons/faq_help_question_icon_16.png" alt="помощь"
                 title="Итоговые суммы будут приведены в рублях">

        </fieldset>
        <fieldset class="table">
            <legend>Добавить оповещения об изменении цены</legend>
            <input type="radio" value="0" checked="checked" name="list_type" id="alert_list">
            <label for="alert_list">Список отслеживаемых</label>
            <input type="radio" value="1" name="list_type" id="add_alert_list">
            <label for="add_alert_list">Добавить для отслеживания</label>
            <div id="alert_table"></div>
            <div id="price_table" style="display: none">
                <label for="add_list_type">Добавить бумаги из</label>
                <select id="add_list_type">
                    <option value="0" selected></option>
                    <option value="1">вручную</option>
                    <option value="2">из портфеля</option>
                    <option value="3">из избранного</option>
                </select>
                <input id="symbol_name" name="symbol_name" maxlength="10" placeholder="Введите название акции" disabled>
                <div id="table"></div>
            </div>

        </fieldset>
    </div>
</div>
</body>
</html>